<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
    <style>
        body {
            background-color: #1a1a1a;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: sans-serif;
            overflow: hidden;
        }
        #call-btn {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(145deg, #00d2ff, #3a7bd5);
            border: none;
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.5);
            cursor: pointer;
            font-size: 18px;
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }
        #call-btn:active { transform: scale(0.95); }
        .pulsing { animation: pulse 2s infinite; }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 210, 255, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(0, 210, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 210, 255, 0); }
        }
        #status { margin-top: 20px; font-size: 16px; opacity: 0.8; }
    </style>
</head>
<body>

    <button id="call-btn">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</button>
    <div id="status">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>

    <script type="module">
        // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Vapi –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –æ–±–ª–∞–∫–∞ (ESM –≤–µ—Ä—Å–∏—è)
        import Vapi from 'https://cdn.jsdelivr.net/npm/@vapi-ai/web/+esm';

        // --- –í–ê–®–ò –ö–õ–Æ–ß–ò ---
        const apiKey = "c0477c0e-7b20-422e-8f6d-438692519d98"; 
        const assistantId = "67aa4515-b4b7-439e-83f7-e45eb2981b02"; 
        // ------------------

        const vapi = new Vapi(apiKey); 
        const btn = document.getElementById('call-btn');
        const status = document.getElementById('status');
        let isCallActive = false;

        btn.addEventListener('click', () => {
            if (!isCallActive) {
                vapi.start(assistantId);
                status.innerText = "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...";
                btn.disabled = true;
            } else {
                vapi.stop();
            }
        });

        vapi.on('call-start', () => {
            isCallActive = true;
            btn.disabled = false;
            btn.innerText = "–°—Ç–æ–ø";
            btn.classList.add('pulsing');
            btn.style.background = "linear-gradient(145deg, #ff416c, #ff4b2b)";
            status.innerText = "–ì–æ–≤–æ—Ä–∏—Ç–µ...";
        });

        vapi.on('call-end', () => {
            isCallActive = false;
            btn.disabled = false;
            btn.innerText = "üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å";
            btn.classList.remove('pulsing');
            btn.style.background = "linear-gradient(145deg, #00d2ff, #3a7bd5)";
            status.innerText = "–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω";
        });

        vapi.on('error', (e) => {
            console.error(e);
            isCallActive = false;
            btn.disabled = false;
            // status.innerText = "–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞"; // –ú–æ–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        });
    </script>
</body>
</html>
